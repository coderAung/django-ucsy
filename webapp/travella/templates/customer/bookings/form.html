{% extends "layouts/customer-layout.html" %}
{% load static %}
{% block content %}

<!-- Notice bar -->
<div class="fw-bold text-center"
     style="background: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
            color:#fff; padding:20px 10px; font-size:1.2rem;">
  Bookings must be reserved before one hour taking off.
</div>

<!-- Two boxes: Tour Details & Booking Form -->
<div class="container mt-2">
  <div class="row">
    
    <!-- Tour Details -->
    <div class="col-md-6 mb-4">
      <div class="p-4 border rounded"
           style="background-color:#fff; border-radius:8px; border:1px solid #ddd; box-shadow:0 4px 15px rgba(0, 123, 255, 0.2);">
        <h4 class="mb-3">Tour Details</h4>
        <p><strong style="display:inline-block; width:160px;">Trip Name:</strong> {{ package.title }}</p>
        <p><strong style="display:inline-block; width:160px;">Date:</strong> <span id="tourDate">{{ departure_date }}</span></p>
        <p><strong style="display:inline-block; width:160px;">Duration:</strong> {{ package.duration }} days</p>
        <p><strong style="display:inline-block; width:160px;">Transportation:</strong>
           {% if package.transportation == 1 %}Bus{% elif package.transportation == 2 %}Plane{% else %}N/A{% endif %}
        </p>
        <p><strong style="display:inline-block; width:160px;">Total Seats:</strong> {{ package.availableTicket }}</p>
        <p><strong style="display:inline-block; width:160px;">Available Seats:</strong> {{ package.availableTicket }}</p>
        <p><strong style="display:inline-block; width:160px;">Price per Seat:</strong> {{ price_per_seat }}</p>
      </div>
    </div>

    <!-- Booking Form -->
    <div class="col-md-6">
      <div class="p-4 border rounded"
           style="background-color:#fff; box-shadow:0 4px 15px rgba(0, 123, 255, 0.2);
                  border-radius:12px; padding:30px 25px;">
        <h4 class="mb-3 text-center fw-semibold">Booking Form</h4>

        <!-- Form posts to your save view -->
        <form id="bookingForm" method="POST" action="{% url 'customer_booking_save' %}">
          {% csrf_token %}

          <!-- Hidden package ID -->
          <input type="hidden" name="package_id" value="{{ package.id }}">

          <div class="mb-3">
            <label class="form-label fw-medium text-dark">Full Name:</label>
            <input type="text" class="form-control" name="fullName" id="fullName"
                   placeholder="Enter your name"
                   style="border:1.8px solid #ced4da; border-radius:8px; padding:9px 12px;" required />
          </div>

          <div class="mb-3">
            <label class="form-label fw-medium text-dark">Email:</label>
            <input type="email" class="form-control" name="email" id="email"
                   placeholder="Enter your email"
                   style="border:1.8px solid #ced4da; border-radius:8px; padding:9px 12px;" required />
          </div>

          <div class="mb-3">
            <label class="form-label fw-medium text-dark">Phone Number:</label>
            <input type="tel" class="form-control" name="phone" id="phone"
                   placeholder="Enter your phone number"
                   style="border:1.8px solid #ced4da; border-radius:8px; padding:9px 12px;" required />
          </div>

          <!-- Side by side row -->
          <div class="row mb-3">
            <div class="col">
              <label class="form-label fw-medium text-dark">Number of People:</label>
              <input type="number" class="form-control" name="ticketCount" id="people" min="1" value="1"
                     style="border:1.8px solid #ced4da; border-radius:8px; padding:9px 12px;"
                     required onchange="updatePrice()" />
            </div>
            <div class="col">
              <label class="form-label fw-medium text-dark">Total Price:</label>
              <input type="text" class="form-control" id="totalPrice" value="{{ price_per_seat }}"
                     style="border:1.8px solid #ced4da; border-radius:8px; padding:9px 12px;" readonly />
            </div>
          </div>

          <div class="text-center">
            <button type="submit" class="btn text-white"
                    style="background: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
                           padding:12px 15px; border-radius:30px; border:none;">
              Confirm Booking
            </button>
          </div>
        </form>
      </div>
    </div>

  </div>
</div>

<!-- JS -->
<script src="{% static 'js/customer.js' %}"></script>

{% endblock %}
