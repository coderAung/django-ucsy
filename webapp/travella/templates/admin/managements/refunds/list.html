{% extends 'layouts/admin-layout.html' %}

{% load static %}

{% block title %}
    Refund Requests
{% endblock title %}


{% block content %}
    <div class="container py-3">
        <div>
            <h5>Refund Requests for processing</h5>
        </div>
        <div>
            <table class="table table-striped table-hover df-fs-sm">
                <thead>
                    <tr>
                        <th>Booking Code</th>
                        <th>Customer</th>
                        <th>Payment Type</th>
                        <th>Payment Phone</th>
                        <th>Status</th>
                        <th>Request At</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    
                    {% if list %}
                        
                        {% for i in list %}
                            <tr class="align-middle">
                                <td>{{i.booking.booking_code}}</td>
                                <td>{{i.booking.customer.email}}</td>
                                <td>{{i.refund_payment_type}}</td>
                                <td>{{i.refund_phone}}</td>
                                <td>
                                    
                                    {% if i.status == 1 %}
                                        <span class="df-badge badge-blue">{{i.get_status_display}}</td></span>
                                    {% else %}
                                        <span class="df-badge badge-yellow">{{i.get_status_display}}</td></span>
                                    {% endif %}
                                <td>{{i.created_at}}</td>
                                <td>
                                    <a href="{% url 'refund_requests_detail' i.id %}" class="btn btn-sm df-btn-glass-blue"><i class="bi bi-eye text-primary"></i></a>
                                    
                                    
                                    {% if i.status == 1 %}
                                    <button
                                    type="button"
                                    class="btn btn-sm df-btn-glass-green refundConfirmBtn" data-code="{{i.booking.booking_code}}"><i class="bi bi-check text-success"></i> Confirm</button>
                                        
                                    {% endif %}
                                        
                                </td>
                            </tr>
                        {% endfor %}

                    {% else %}
                        <tr>
                            <td colspan="4">No records</td>
                        </tr>        
                    {% endif %}
                        
                </tbody>
            </table>        
        </div>
    </div>

    <form action="{% url 'refund_confirm' %}" class="d-none" id="refundForm" method="post">
        {% csrf_token %}
        <input name="code" type="text" id="bookingCodeInput">
    </form>
    <script src="{% static 'js/refund.js' %}"></script>
{% endblock content %}
        