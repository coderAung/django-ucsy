{% extends 'layouts/admin-layout.html' %}
{% block content %}
<div class="container">
  <h3 class="mb-4 mt-3 fw-semibold text-primary">Booking Management</h3>

  <!-- Search and filter -->
  <form class="row row-cols-lg-auto g-3 align-items-center mb-4">
    <div class="col">
      <select class="form-select">
        <option value="">All Status</option>
        <option value="pending">Pending</option>
        <option value="reserved">Reserved</option>
        <option value="cancelled">Cancelled</option>
      </select>
    </div>

    <div class="col">
      <input type="text" class="form-control" placeholder="Username or Booking ID">
    </div>

    <div class="col">
      <button type="submit" class="btn btn-primary px-4">
        <i class="bi bi-search"></i> Search
      </button>
    </div>
  </form>

  <!-- Booking table -->
  <div class="table-responsive">
    <table class="table table-hover align-middle df-fs-sm">
      <thead class="table-light">
        <tr>
          <th>Username</th>
          <th>Package</th>
          <th>Booked Date</th>
          <th>Status</th>
          <th>Time</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
  {% for booking in bookings %}
  <tr>
    <td>{{ booking.customer.email }}</td>  <!-- or booking.customer.accountdetail.name if available -->
    <td>{{ booking.package.title }}</td>
    <td>{{ booking.statusUpdatedAt|date:"F j, Y" }}</td>
    <td>
      {% if booking.status == booking.Status.RESERVED %}
        <span class="df-badge badge-green">Reserved</span>
      {% elif booking.status == booking.Status.CANCELLED %}
        <span class="df-badge badge-red">Cancelled</span>
      {% else %}
        <span class="df-badge badge-yellow">Pending</span>
      {% endif %}
    </td>
    <td>{{ booking.statusUpdatedAt|time:"g:i A" }}</td>
    <td>
      <a href="{% url 'booking_detail' booking.id %}" class="btn btn-info btn-sm text-white px-3">Details</a>
    </td>
  </tr>
  {% empty %}
  <tr><td colspan="6">No bookings found.</td></tr>
  {% endfor %}
</tbody>

    </table>
  </div>
</div>
{% endblock %}
